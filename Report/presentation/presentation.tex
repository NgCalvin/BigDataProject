\documentclass[11pt]{beamer}
\usetheme{Warsaw}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage[]{algorithm2e}
\usepackage{animate}
\usepackage{scrextend}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{tcolorbox}
\usepackage{lipsum}
\usepackage{systeme}

\author{Chan Hei Nam, \\Cheng Tin Chu, \\Lei Wen Feng, \\Ng Wing Hin}

\title{Ranking and Prediction of Amazon Fine Food based on Costumer's rating and review}
\date{}
%\setbeamercovered{transparent}
%\setbeamertemplate{navigation symbols}{}
%\logo{}
%\institute{}
%\date{}
%\subject{}
\begin{document}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}[section] % reset theorem numbering for each chapter

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition} % definition numbers are dependent on theorem numbers
\newtheorem{exmp}[thm]{Example} % same for example numbers
\newtheorem{prop}{Property}[section]


\begin{frame}
\titlepage
\end{frame}

%\begin{frame}
%\tableofcontents
%\end{frame}

\begin{frame}
\frametitle{Introduction}
User's rating and review is one of the explicit ways to determine product's popularity. In this project, we are trying to process the Amazon Fine Food Reviews such that the result can be used to predict the rating based on review.
\end{frame}

\begin{frame}
\frametitle{Basic statistics of the dataset}

\begin{tcolorbox}[colback=blue!5,colframe=blue!40!black,title=Basic statistics of the dataset]
\centering
\begin{tabular}{lll}
	\hline
	    					& Rating 	& Word(Processed)\\
	\hline
	Mean					& 4.18 		& 255\\
%	Standard Deivation	& 1.31		& \\
	Minimum       		& 1 			& 7\\
	Maximum       		& 5 			& 14425\\
%	First Quartile 		& 4 			& 				& \\
%	Median 				& 4 			& 				& \\
%	Third Quartile 		& 5 			& 				& \\
	\hline
\end{tabular}
\end{tcolorbox}
\end{frame}


\begin{frame}
\frametitle{System Structure}
There are mainly three stages in our system :
\begin{labeling}{alligator}
\item [Stage 1] Pre-processing the dataset.
\item [Stage 2] Using MapReduce, find the first hundred k-shingles, \(1\leq k\leq 5\), of each rating, \(1 \leq \mbox{rating} \leq 5\).
\item [Stage 3] Do prediction of rating based on the review input to the system.
\end{labeling}
\end{frame}


\begin{frame}
\frametitle{Stage 1 Pre-processing}

\begin{tcolorbox}[colback=blue!5,colframe=blue!40!black,title=\textbf{Algorithm 1}: Pre-processing]
\begin{algorithm}[H]
 \While{There exists next row inside Reviews.csv}
 {
 	Extract \textbf{Rating} and \textbf{Text}\;
 	Lower \textbf{Text} and remove \emph{some} stopwords and punctuation\;
 	Returning line with format \(Rating, word_{1}, word_{2}, ...\)\;
 }
\end{algorithm}
\end{tcolorbox}

\end{frame}

\begin{frame}
\frametitle{Example result from Stage 1}

Original data :

\vspace{2mm}

\resizebox{\linewidth}{!}{
\begin{tabular}{l}
  \toprule
	Id, ProductId, UserId, ProfileName, HelpfullnessNumerator, HelpfullnessDenominator, Score, Time, Summary, Text\\
  \midrule
	1,B001E4KFG0,A3SGXH7AUHU8GW,delmartian,1,1,5,1303862400,Good Quality Dog Food,I have bought... \\
	2,B00813GRG4,A1D87F6ZCVE5NK,dll pa,0,0,1,1346976000,Not as Advertised,"Product arrived labeled...\\
	3,B000LQOCH0,ABXLMWJIXXAIN,"Natalia Corres ""Natalia Corres""",1,1,4,1219017600,"""Delight"" says it all","This is a confection...\\
    4,B000UA0QIQ,A395BORC6FGVXV,Karl,3,3,2,1307923200,Cough Medicine,If you are looking... \\

  \bottomrule

\end{tabular}}

\vspace{5mm}


Result data :

\vspace{2mm}

\resizebox{\linewidth}{!}{
\begin{tabular}{l}
  \toprule
	Score, Text\\
  \midrule
 	5,bought vitality canned dog food products good quality product looks... \\
	1,product arrived labeled jumbo salted peanutsthe peanuts actually... \\
	4,confection centuriesit light pillowy citrus gelatin nutsin case filberts...\\
	2,looking secret ingredient robitussin believe iti got addition root... \\
  \bottomrule
\end{tabular}}
\end{frame}

\begin{frame}
\frametitle{Stage 2 MapReduce}

\begin{tcolorbox}[
	colback=blue!5,
	colframe=blue!40!black,
	title=\textbf{Algorithm 2}: MapReduce (Mapper)
	]
\begin{algorithm}[H]
	\While{There exists next row inside Preprocessed.csv}
	{
		\For{$k \leftarrow 1$ \KwTo $5$}
		{
			\label{forins}
			Find all k-shingles\;
			\For{Each shingle found}
			{
				Return \(<<\mbox{rating, k, shingle}>,1>\);
			}
 		}
	}
\end{algorithm}
\end{tcolorbox}

\end{frame}

\begin{frame}
\frametitle{Stage 2 MapReduce}

\begin{tcolorbox}[
	colback=blue!5,
	colframe=blue!30!black,
	title=\textbf{Algorithm 2}: MapReduce (Reducer)
	]
\begin{algorithm}[H]
	\ForAll{tuples with key \(<\mbox{rating, k, shingle}> \)} {
		frequency = sum of all tuple values;\\
		Return \(<\mbox{rating, k, frequency, shingle}>\)\;
	}
\end{algorithm}
\end{tcolorbox}

\end{frame}

\begin{frame}
\frametitle{Exmaple result from Stage 2}

Result from MapReduce : \\
\vspace{5mm}
\resizebox{\linewidth}{!}{
\begin{tabular}{llll}
  \toprule
	Score& k& frequency& shingle\\
  \midrule
	3&4&23&food freshly openedpi likes\\
	1&2&238&br tried\\
	2&1&1601&say\\
	3&4&27&coffeetea love organic coffee\\

  \bottomrule

\end{tabular}}

\end{frame}


\begin{frame}
\frametitle{Stage 3 Prediction}

\begin{tcolorbox}[
	colback=blue!5,
	colframe=blue!40!black,
	title=\textbf{Algorithm 3}: Prediction]
\end{tcolorbox}

\end{frame}

\begin{frame}
\frametitle{Stage 3 Prediction}

\end{frame}

\begin{frame}
\frametitle{Weighted formula for calculating prediction rating}
\begin{tcolorbox}[colback=blue!5,colframe=blue!40!black,title=Weighted formula]

For each k : \\
\(t_{i} = \mbox{k-shingles}\)

\centering
\(\mbox{Weighted Score} = \frac{\displaystyle\sum_i \sum_j \mbox{score}_j(t_{i}) \times \mbox{freq}_j(t_{i})}{\displaystyle\sum_i \sum_j \mbox{freq}_j(t_{i})}\)

\raggedright
where \(i = i^{th}\) k-shingle and \(1 \leq j \leq 5\).

\end{tcolorbox}

\end{frame}

\begin{frame}
\frametitle{Regression Model}
\begin{tcolorbox}[colback=blue!5,colframe=blue!40!black,title=Regression model]
System of linear equation :
\begin{equation}
\begin{alignedat}{4}
y_1 &= \beta_0  + \beta_1 x_1 + \dots + \beta_5 x_5\\
y_2 &= \beta_0 + \beta_1 x_1 + \dots + \beta_5 x_5\\
\;\vdots  &            \qquad\qquad\qquad\vdots \\
y_n &= \beta_0 + \beta_1 x_1 + \dots + \beta_5 x_5
\end{alignedat}
\end{equation}
In matrix form :

\centering
\(\textbf{Y}= \boldsymbol{\beta_0}+\boldsymbol{\beta} \cdot \textbf{X}\)

\raggedright
where\\
\(\textbf{Y}\) is a \(n\times1\) matrix,\\
\(\boldsymbol{\beta_0}\) is a \(n\times 1\) matrix,\\
\(\boldsymbol{\beta}\) is a \(5\times 1\) matrix,\\
\(\textbf{X}\) is a \(n\times 5\) matrix.
\end{tcolorbox}
\end{frame}

\begin{frame}
\frametitle{Regression Model}
\begin{tcolorbox}[colback=blue!5,colframe=blue!40!black,title=Complexity]
key computation step:
\begin{itemize}
\item \(\textbf{X}^T\textbf{X} \mbox{ in O(} n\times k^2 \mbox{)}\)
\item \((\textbf{X}^T\textbf{X})^{-1} \mbox{ in O(} k^3 \mbox{)}\)
\end{itemize}
As \(n>>k\), the overall complexity is O(\(n\)).
\end{tcolorbox}
\end{frame}

\begin{frame}
\frametitle{Demostration}

\end{frame}

\begin{frame}
\frametitle{Conculsion}

\end{frame}

\end{document}
